(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),c=n.n(r),s=(n(13),n(1)),u=(n(14),function(e){return fetch("/tasks/".concat(e),{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),i=function(e,t){return fetch("/tasks/".concat(t,"/").concat(e),{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},l=function(e,t){return fetch("/tasks/".concat(e,"/").concat(t.taskId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:t})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},m=function(e){var t=e.onLogin,n=e.setError,r=Object(a.useState)(""),c=Object(s.a)(r,2),u=c[0],i=c[1];return Object(a.useEffect)((function(){n("")}),[]),o.a.createElement("div",{className:"login"},o.a.createElement("div",{className:"auth"},o.a.createElement("input",{className:"form-control",onChange:function(e){return i(e.target.value)},placeholder:"Enter Username Here"}),o.a.createElement("button",{className:"btn btn-login",onClick:function(){(function(e){return fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(u).then((function(e){t(e.data.username)})).catch((function(e){n(e.message)}))}},"Login")))},f=function(e){var t=e.onLogout,n=e.setError;return o.a.createElement("div",{className:"logout"},o.a.createElement("button",{className:"btn btn-logout",onClick:function(){fetch("/session",{method:"DELETE"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){if(!e.ok)return Promise.reject({error:"Error logging out"})})).then((function(){return t()})).catch((function(e){n(e.error)}))}},"Logout"))},d=function(e){var t=e.onSend,n=e.userState,r=e.setUserState,c=e.setError,i=Object(a.useState)(""),l=Object(s.a)(i,2),m=l[0],f=l[1];return o.a.createElement("div",{className:"message"},o.a.createElement("input",{className:"form-control",value:m,onChange:function(e){c(""),f(e.target.value)},placeholder:"Enter Task Here"}),o.a.createElement("button",{className:"btn btn-send",onClick:function(e){m&&function(e,t){return fetch("/tasks/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:e})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}({task:m,done:!1},n.username).then((function(){f(""),u(n.username).then((function(e){t(e.data),c("")}))})).catch((function(e){c(e.message),"no valid session"!==e.message&&"action not permitted"!==e.message||(r({isLoggedIn:!1}),c("Login to continue"))}));m||c("Message cannot be Empty")}},"Add Todo"))},h=n(7),g=n(4),j=function(e){var t=e.filterState,n=e.onFilter,r=e.sortState,c=e.onSort,u=Object(a.useState)(r),i=Object(s.a)(u,2),l=i[0],m=i[1],f=Object(a.useState)(t),d=Object(s.a)(f,2),h=d[0],g=d[1];return o.a.createElement("div",{className:"filters"},o.a.createElement("div",{className:"filter"},o.a.createElement("select",{value:l,className:"form-control form-select",onChange:function(e){m(e.target.value),c(e.target.value)}},o.a.createElement("option",{value:"1"},"Sort By Name (A-Z)"),o.a.createElement("option",{value:"2"},"Sort By Name (Z-A)"),o.a.createElement("option",{value:"3"},"Sort By Done"),o.a.createElement("option",{value:"4"},"Sort By Not Done")),o.a.createElement("select",{value:h,className:"form-control form-select",onChange:function(e){g(e.target.value),n(e.target.value)}},o.a.createElement("option",{value:"1"},"Show All"),o.a.createElement("option",{value:"2"},"Show Only Done"),o.a.createElement("option",{value:"3"},"Show Only Not Done")),o.a.createElement("button",{className:"btn btn-refresh",onClick:function(e){c(),n(),m("1"),g("1")}},"Refresh")))},E=function(e){var t=e.todos,n=e.userState,r=e.setTodos,c=e.setError,m=e.setUserState,f=Object(a.useState)(""),d=Object(s.a)(f,2),E=d[0],v=d[1],b=Object(a.useState)(""),p=Object(s.a)(b,2),k=p[0],S=p[1],N=Object(a.useState)(""),O=Object(s.a)(N,2),L=O[0],P=O[1],T=function(e){var t=e.target.dataset.id;i(t,n.username).then((function(e){e.data.done=!e.data.done;var t=Object(g.a)({},e.data);l(n.username,t).then((function(){u(n.username).then((function(e){r(Object.values(e.data))}))}))})).catch((function(e){c(e.message),"no valid session"!=e.message&&"action not permitted"!=e.message||(m({isLoggedIn:!1}),c("Login to access"))}))},y=function(e){var t=e.target.dataset.id,a=E;a?i(t,n.username).then((function(e){var t=e.data,o=Object(g.a)({},t,{task:a});l(n.username,o).then((function(){u(n.username).then((function(e){r(Object.values(e.data))}))}))})).catch((function(e){c(e.message),"no valid session"!=e.message&&"action not permitted"!=e.message||(m({isLoggedIn:!1}),c("Login to continue..."))})):c("Message cannot be empty")},C=function(e){var t,a,o=e.target.dataset.id;(t=n.username,a=o,fetch("/tasks/".concat(t,"/").concat(a),{method:"DELETE"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(){u(n.username).then((function(e){r(Object.values(e.data))}))})).catch((function(e){c(e.message),"no valid session"!=e.message&&"action not permitted"!=e.message||(m({isLoggedIn:!1}),c("Login to continue..."))}))};var I=Object(h.a)(t).sort((function(e,t){switch(L){case"1":return e.task.localeCompare(t.task);case"2":return t.task.localeCompare(e.task);case"3":return t.done-e.done;case"4":return e.done-t.done;default:return e.task.localeCompare(t.task)}})).filter((function(e){switch(k){case"1":return!0;case"2":return!0===e.done;case"3":return!1===e.done;default:return!0}})).map((function(e){return o.a.createElement("li",{className:"item-group-child",key:e.taskId},o.a.createElement("div",{className:"item-grid"},o.a.createElement("div",{className:"done"},o.a.createElement("button",{className:e.done?"btn btn-done":"btn btn-not-done","data-id":e.taskId,onClick:T},e.done?"Done":"Not Done")),o.a.createElement("div",{className:"message"},o.a.createElement("input",{className:"form-control",onChange:function(e){c(""),v(e.target.value)},defaultValue:e.task,placeholder:"Update Task Here"}),o.a.createElement("button",{className:"btn btn-update","data-id":e.taskId,onClick:y},"Update")),o.a.createElement("button",{className:"btn btn-delete","data-id":e.taskId,onClick:C},"Delete")))}));return o.a.createElement("div",{className:"todo-area"},o.a.createElement(j,{filterState:k,onFilter:function(e){return S(e)},sortState:L,onSort:function(e){return P(e)}}),o.a.createElement("div",null,o.a.createElement("ul",{className:"item-group todo-group"},I)))},v=function(e){var t=e.userState,n=e.setUserState,r=e.setError,c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],m=i[1];Object(a.useEffect)((function(){u(t.username).then((function(e){m(Object.values(e.data))})).catch((function(e){r(e.message)})),r("")}),[]);return o.a.createElement("div",{className:"todo"},o.a.createElement("div",{className:"message-area"},o.a.createElement(d,{onSend:function(e){m(Object.values(e))},userState:t,setUserState:n,setError:r})),l.length>0&&o.a.createElement(E,{todos:l,userState:t,setTodos:m,setError:r,setUserState:n}))},b=o.a.createContext("colorful"),p=function(){var e=Object(a.useState)({isLoggedIn:!1}),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),i=u[0],l=u[1],d=Object(a.useState)("light"),h=Object(s.a)(d,2),g=h[0],j=h[1];Object(a.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){r({isLoggedIn:!0,username:e.data.username}),E(e.data.username)}))}),[]);var E=function(e){(function(e){return fetch("/theme/".concat(e),{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e).then((function(e){"light"===e.data||"dark"===e.data?j(e.data):j("colorful")})).catch((function(e){l(e.message),"no valid session"!==e.message&&"action not permitted"!==e.message||r({isLoggedIn:!1})}))};return o.a.createElement(b.Provider,{value:[g,j]},o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("div",{className:"theme"},n.isLoggedIn&&o.a.createElement("select",{value:g,className:"form-control form-select",onChange:function(e){j(e.target.value),function(e,t){return fetch("/theme/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:t})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(n.username,e.target.value).catch((function(e){l(e.message),"no valid session"!==e.message&&"action not permitted"!==e.message||r({isLoggedIn:!1})}))}},o.a.createElement("option",{value:"colorful"},"Colorful Theme"),o.a.createElement("option",{value:"light"},"Light Theme"),o.a.createElement("option",{value:"dark"},"Dark Theme"))),o.a.createElement("h2",null,"Welcome To T0d0!"),o.a.createElement("div",null,n.isLoggedIn&&o.a.createElement(f,{onLogout:function(){r({isLoggedIn:!1}),j("light")},setError:l}))),o.a.createElement("section",{className:g},o.a.createElement("p",{className:"info-danger"},i),n.isLoggedIn&&o.a.createElement(v,{userState:n,setUserState:r,setError:l}),!n.isLoggedIn&&o.a.createElement(m,{onLogin:function(e){r({isLoggedIn:!0,username:e}),E(e)},setError:l}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.edcf9d47.chunk.js.map